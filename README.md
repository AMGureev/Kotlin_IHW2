# Домашнее задание по КПО №2 "Система управления заказами в ресторане"
## О работе приложения
Данное приложение реализует основной функционал(на 8 баллов), а также дополнительный (+ 2 балла) функционал. Программа была реализована по принципам ООП и SOLID, с использованием шаблонов проектирования.   
Данные о пользователях/админах, информация о блюдах, меню и отзывах, а также заказах находятся в соответсвующих папках ``accounts``, ``dishes``, ``menu``, ``reviews``, а также ``orders`` в файлах формата ``json``. Данный формат выбран ввиду 
удобства для чтения обычным пользователем.
## Руководство по использованию админ-клиента (admin)  
### Регистрация при входе в приложение  
При запуске программы будет выведено следующее приветсвие с набором доступных действий: 
```
Welcome to the restaurant app!
Choose one of the three actions:
1. Sign in
2. Sign up
3. Exit program
```
Чтобы зарегистрироваться в системе, необходимо нажать цифру ``2``, после чего ввести логин и пароль, которые вы хотите использовать при входе в свой личный аккаунт.  
```
Your choose: 2
Sign up!
Input your new login: admin
Input your new password: admin
```
После ввода пароля на экране появится вопрос, на который нужно ответить ``y`` (пример ниже):
```
Are you an admin(y/n): y
```
В случае успешной регистрации (неуспешной регистрация может быть при некорректно введенных данных, а также если аккаунт с таким логином уже был ранее зарегистрирован в системе), пользователь получит следующее уведомление:
```
The account with this username admin(admin) successfully creation!
```
В случае возникновения ошибок программа выводит на экран ошибку, которая произошла в процессе регистрации.
### Вход в приложение (админ)
Для входа в приложение необходимо ввести ``1`` в предложенном наборе дейтсвий:
```
Choose one of the three actions:
1. Sign in
2. Sign up
3. Exit program
Your choose: 1
```
После чего программа потребует ввести корректные логин и пароль, которые были использованы при регистрации:
```
Your choose: 1
Sign in!
Input your login: user
Input your password: user
```
В случае корректно введенных данных программа уведомит вас об успешном входе в систему.
### Возможности админа
При входе в аккаунт админу можно выбрать одно из действий:
```
Main admin table
Choose one of the actions:
1. Interaction with dishes
2. Get stats about dishes
3. Info about orders
4. Info about accounts
5. Get info about revenue
6. Sign out
7. Exit program
```
В зависимости от введенного значения админ перейдет на одну из следущих страниц:
1. Взаимодействие с блюдами
2. Узнать статистику блюд
3. Информация о заказах
4. Информация об аккаунтах
5. Узнать выручку ресторана
#### Взаимодействие с блюдами
```
1. Create new dish
2. Delete dish
3. Check all dishes
4. Add a dish to the menu
5. Edit info about dish
```
В зависимости от введенного значения админ перейдет на одну из следущих страниц:  
1. Если админ нажмет ``1``, то у него будет возможность создать новое блюдо. Ему необходимо ввести такие параметры, как ``название блюда``, ``цену блюда``, ``время приготовления блюда``,``вес блюда``. В случае корректного созданию блюда админ получит об этом соответствующее уведомление, а также предложение добавить блюдо в меню, указав кол-во доступных блюд.  
2. Если админ нажмет ``2``, то у него будет возможность удалить существующее блюдо. Необходимо ввести название блюда. Если в этот момент кухня работает над приготовлением данного блюда, админ не сможет удалить блюдо. Если админ ввел название несуществующего блюда, процесс удаления также не будет выполнен.  
3. Если админ нажмет ``3``, то ему нужно выбрать, какие блюда он хочет посмотреть: которые входят в меню или все (даже те, которые есть на складе, но которых нет в меню).  
4. Если админ нажмет ``4``, то ему нужно ввести название ранее созданного блюда, которые он хочет добавить в меню. Если кол-во блюд на складе равно 0, админу необходимо будет указать кол-во блюд, которые будут доступны пользователям для покупки.  
5. Если админ нажмет ``5``, то у него будет возможность отредактировать полную информацию о существующем блюде.  
#### Узнать статистику блюд
```
1. Stats about dish
2. Average dishes rating
```
В зависимости от введенного значения админ перейдет на одну из следущих страниц:  
1. Если админ ввел ``1``, то он сможет узнать статистику о блюде, а именно: среднюю оценку (от 0 до 5), которую посетители оставили блюду, а также все отзывы.
2. Если админ нажмет ``2``, то он сможет узнать среднюю оценку (от 0 до 5) заведения (складывается из оценок всех блюд).
#### Информация о заказах
```
1. In process - 'cooking'
2. Wait to pay - 'ready'
3. Cancelled by the user - 'canceled'
4. Paid for by the user - 'paid'
5. Filter orders by cooking start time
```
В зависимости от введенного значения админ увидит следующую информацию:  
1. Если админ ввел ``1``, то программа выведет заказы, которые находятся в процессе приготовления.  
2. Если админ ввел ``2``, то программа выведет заказы, которые были приготовлены и ожидают оплаты от пользователя, сделавшего заказ.  
3. Если админ ввел ``3``, то программа выведет заказы, которые были отменены пользователем.  
4. Если админ ввел ``4``, то программа выведет заказы, которые были оплачены пользователем после их получения.  
5. Если админ ввел ``5``, то программа будет ожидать от пользователя ввода двух дат, благодаря которым приложение отфильтрует заказы и выведет их на экран.
#### Информация об аккаунтах
Примерная информация:
```
1. Login: user, rule: user.
Count of orders: 2
2. Login: sasha, rule: admin.
3. Login: admin, rule: admin.
```
Админ сможет узнать логины аккаунтов, а также их роли. Если это обычный пользователь, то будет также предоставлена информация о кол-ве сделанных заказов.
#### Узнать выручку ресторана
Примерная информация:
```
Total revenue : 51.0$.
```
Админ получит информацию о выручке за весь период работы ресторана.
## Завершение работы программы админом
Если администатор (или пользователь) хочет завершить работу программы, ему нужно выбрать соответствующую инструкцию на главном экране (Exit program). Если в момент завершения на кухне работают повара (то есть существуют готовящиеся заказы), программа выведет соответствуюшее уведомление с требованием подтвердить выбранное действие. В случае выхода программа не сохранит информаацию о готовящихся заказах.  
## Руководство по использованию клиента пользователя (user) 
### Регистрация при входе в приложение  
При запуске программы будет выведено следующее приветсвие с набором доступных действий: 
```
Welcome to the restaurant app!
Choose one of the three actions:
1. Sign in
2. Sign up
3. Exit program
```
Чтобы зарегистрироваться в системе, необходимо нажать цифру ``2``, после чего ввести логин и пароль, которые вы хотите использовать при входе в свой личный аккаунт.  
```
Your choose: 2
Sign up!
Input your new login: user
Input your new password: user
```
После ввода пароля на экране появится вопрос, на который нужно ответить ``n`` (пример ниже):
```
Are you an admin(y/n): n
```
В случае успешной регистрации (неуспешной регистрация может быть при некорректно введенных данных, а также если аккаунт с таким логином уже был ранее зарегистрирован в системе), пользователь получит следующее уведомление:
```
The account with this username user successfully creation!
```
В случае возникновения ошибок программа выводит на экран ошибку, которая произошла в процессе регистрации.
### Вход в приложение  
Действия при входе в аккаунт обычного пользователя идентичны [действиям админа](#Вход-в-приложение-админ).
### Возможности пользователя
```
Choose one of the actions:
1. View the contents of the menu
2. Make a new order
3. Interaction with my orders (and edit order)
4. Reviews
5. Sign out
6. Exit program
```
В зависимости от введенного значения пользователь перейдет на одну из следущих страниц:
1. Посмотреть содержимое меню
2. Создать заказ
3. Взаимодействие с моими заказами
4. Отзывы
#### Посмотреть содержимое меню
Примерная информация:
```
The menu's dishes:
1. Title: apple, price: 100.0, weight: 12.0.
```
Пользователь сможет узнать, какие блюда доступны для создания заказа.
#### Создать заказ
Примерная информация:
```
Make an order
Please, input dish's title: 
Input format: {dish name} x{quantity}
>>apple x1
>>end
Your order has been formed and submitted for processing! Wait!
```
Программа запросит у пользователя ввести названия и кол-ва блюд, которые тот хочет поместить в заказ. Если блюд в заказе не оказалось, пользователь получит об этом соответствующее уведомление.
#### Взаимодействие с моими заказами
```
1. Print all orders
2. Print cooking orders
3. Print orders awaiting payment(paid orders)
4. Print paid orders
```
В зависимости от введенного значения админ увидит следующую информацию:  
1. Если пользователь ввел ``1``, то программа выведет информацию о всех заказах (вне зависимости от их статуса).
2. Если пользователь ввел ``2``, то программа выведет информацию о всех заказах, которые в данный момент находятся в обработке (готовятся на кухне). Если такие заказы есть, пользователь может отредактировать свой заказ (добавить туда одно блюдо из меню) или отменить заказ. Для этого надо выбрать одно из предложенных действий, после чего выполнить шаги для отмены или редактирования заказа.  
3. Если пользователь ввел ``3``, то программа выведет информацию о всех заказах, которые в данный момент ожидают оплаты. Пользователь может оплатить заказ. Перед оплатой программа попросит подтверждение его дейтсвий.
4. Если пользователь ввел ``4``, то программа выведет информацию об оплаченных заказах.
#### Отзывы
```
1. Create a review
2. Edit a review
3. Delete a review
```
В зависимости от введенного значения админ увидит следующую информацию:  
1. Если пользователь ввел ``1``, то у него будет возможность написать отзыв об одном из блюд, которые были у него в заказе. Если пользователь ранее оставлял отзыв об этом блюде, программа предупредит пользователя об этом.
2. Если пользователь ввел ``2``, то у него будет возможность отредактировать ранее опубликованный отзыв о каком-то блюде.
3. Если пользователь ввел ``3``, то у него будет возможность удалить анее опубликованный отзыв о каком-то блюде.
## Завершение работы программы пользователем
Действия при выходе из аккаунта обычного пользователя идентичны [действиям админа](#Завершение-работы-программы-админом).
## Содержание работы
### Обязательные критерии
1. Программа выполнена по принципам ``ООП`` и ``SOLID``.
2. Реализована аутентификация с использованием шифрования паролей.
3. В процессе разработки приложения были использованы следующие шаблоны:
   1. Фасад. Используется для скрытия функционала, предоставляет простой интерфейс для работы с подсистемой (наглядная демонстрация выполнена в кухне).(реализацию можно посмотреть в коде).
   2. Фабрика. Используется для создания конкретного типа аккаунта (админ или обычный пользователь)(реализацию можно посмотреть в коде).
   3. Интерфейс. Используется для определения набора методов, которые классы должны реализовать, обеспечивая стандартизацию поведения (реализацию можно посмотреть в коде).
4. Хранение данных реализовано благодаря ``json`` файлам.
5. Реализована многопоточность для обработки заказов (реализацию можно посмотреть в коде).
6. Программа написана с соблюдением правил ``Codestyle``.
7. -//-
8. Друзья сказали, что интерфейс `user-friendly`.
### Опциональные критерии
1. Реализована возможность клиентам оставлять отзывы о блюдах после оплаты заказа, редактировать и удалять отзывы о блюдах.
2. Реализован функционал, позволяющий администратору просматривать статистику по заказам и отзывам, а именно: отсортировать заказы по статусу, узнать среднюю оценку конкретного блюда, прочитать отзывы о конкретном блюде, отфильтровать заказы по времени их создания.
3. Приоритетная система обработки заказов определена в порядке их поступления. Как только заказ поступает, он становится в очередь на обработку, ожидая, пока один из поваров освободится и будет готов взяться за выполнение данного заказа. Я считаю, что именно такая система используется и в настоящих ресторанах, поэтому решил реализовать свой ресторан по такой системе.
## Информация о студенте
Работу выполнил студент 2 курса Гуреев Александр Михайлович, БПИ227.
